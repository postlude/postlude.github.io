---
categories:
  - 기타
tags:
  - linux
date: 2019-02-26 13:59:02
title: VirtualBox에서 CentOS 설치하기 (2)
updated:
---


{% post_link virtualbox-centos-install 지난 포스트 %}에서 윈도우 환경에 VirtualBox로 CentOS 가상 머신을 설치했습니다.
그 상태로도 사용할수는 있지만 화면 사이즈 조절이나 클립보드 복사 등의 기능이 제대로 동작하게 하기 위해서는 게스트 확장 이미지를 설치해야 합니다.

가상 머신을 실행시킨 상태에서 상단의 [장치 - 게스트 확장 CD 이미지 삽입] 을 클릭합니다.
아래와 같이 메시지가 뜰 텐데 Run 을 선택해주시면 됩니다. 권한을 묻는 창이 뜬다면 해당 계정의 패스워드를 입력하시면 됩니다.

{% asset_img 27.JPG %}

그러면 아래와 같은 터미널이 뜹니다. 
정확히는.. 뜰수도 있고 아닐수도 있습니다. 제가 이렇게 말씀드리는 이유는 이번에 뜬 메시지가 예전에 제가 테스트할 때 떴던 메시지와 달랐기 때문입니다.
중요한 점은 아래와 같은 메시지라면 설치에 실패한 것입니다. 이전에는 fail 이라는 메시지가 떴었습니다.

{% asset_img 28.JPG %}

이 문제를 해결하기 위해 구글링을 해서 여러 방법을 시도했었는데요, 그 중에 성공한 방법을 전달드리겠습니다.

> 이 다음부터 설명드리는 방법이 베스트인지는 저도 잘 모르겠습니다. 혹시 더 좋은 방법을 아시는 분들은 알려주시면 감사하겠습니다.

아래의 명령어를 실행합니다. 명령어 실행을 위해 root 권한이 필요합니다.

{% codeblock %}
    cd /etc/yum.repos.d/
    wget http://download.virtualbox.org/virtualbox/rpm/rhel/virtualbox.repo
    yum install -y kernel source kernel-devel gcc
{% endcodeblock %}

{% asset_img 32.JPG %}

yum 으로 패키지 설치가 끝났다면 다시 게스트 확장 이미지를 실행시켜야 합니다.
하지만 동일하게 [장치 - 게스트 확장 CD 이미지 삽입]을 클릭하면 이미 이미지가 삽입되어 있다는 식의 메시지가 뜨게 됩니다.
가상 머신의 바탕화면을 보면 CD 모양의 아이콘이 하나 생긴 것을 확인하실 수 있습니다. 처음 게스트 확장 이미지를 삽입했을때 생성된 것입니다.

아이콘을 우클릭해 Open in Terminal 을 클릭합니다.

{% asset_img 33.JPG %}

autorun.sh 을 실행합니다.

{% asset_img 34.JPG %}

아까와 유사하지만 조금 다른 터미널 메시지가 뜹니다.

{% asset_img 35.JPG %}

정상적으로 설치가 되었으니 재부팅을 해야합니다. 가상 머신 종료 후 재시작하기 전에 몇 가지 설정을 적용하도록 하겠습니다.

[설정 - 일반 - 고급 - 클립보드 공유 : 양방향]
[설정 - 일반 - 고급 - 드래그 앤 드롭 : 양방향]

{% asset_img 29.JPG %}

클립보드를 설정하면 가상 머신과 호스트 간의 복사 붙여넣기가 가능해집니다.
드래그 앤 드롭을 설정하면 마우스로 파일을 끌어다 놓을 수 있게 됩니다...만 크기가 조금만 커져도 시간이 상당히 걸리더군요. 그래서 공유 폴더를 이용하겠습니다.

[설정 - 공유 폴더 - 폴더 모양에 + 가 있는 아이콘]

{% asset_img 40.JPG %}

호스트에서 원하는 위치에 빈 폴더를 하나 만들고 해당 경로를 사용하기로 했습니다. **자동 마운트**와 **항상 사용하기**를 체크해주시면 됩니다.

{% asset_img 30.JPG %}

드디어! 설정이 끝났습니다. 가상 머신을 실행하시면 됩니다.

이제 VirtualBox 창 크기를 조절하면 그 크기에 맞게 CentOS 창 사이즈도 변경됩니다.
또한, 호스트와 게스트 간의 클립보드 공유가 가능해집니다. 호스트에서 ctrl + c 로 복사한 내용을 게스트 터미널에서 shift + insert 로 붙여넣기 할 수 있습니다.
다만, 게스트 터미널에서 호스트로 붙여넣기 하기 위해서는 게스트 터미널의 선택 영역 - 우클릭 - 복사를 해야 복사가 됩니다.

공유 폴더의 경우 `/media` 하위에 마운트가 됩니다.
아래와 같이 호스트 폴더명 앞에 sf_ 붙은 이름으로 마운트가 되어 있습니다. 호스트든 게스트든 마운트한 디렉토리에 파일을 생성하면 어느 쪽에서든 사용가능합니다.
다만 소유자가 root로 되어 있으므로 게스트에서 사용시 root 권한이 있는 유저만 사용 가능합니다.

{% asset_img 38.JPG %}

이렇게 VirtualBox에서 CentOS를 사용하기 위한 모든 세팅이 끝났습니다.
다음 포스트에서는 VirtualBox의 몇 가지 기능과 사용 팁 등을 말씀드리겠습니다.