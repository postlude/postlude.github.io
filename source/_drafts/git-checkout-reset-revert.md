---
categories:
  - null
tags:
  - null
date: 2019-03-21 23:46:42
title: git redo
updated:
---

git을 사용할 때 명령어를 항상 옳게 사용하면 좋겠지만 사람이라는게 실수를 하기 마련이죠.
그러기 위해서 필요한 것이 되돌리는 작업들입니다. 이번 시간에는 git의 여러 가지 되돌리기와 관련된 명령어를 알아보고자 합니다.

## 1. 수정사항 되돌리기

개인적으로 가장 빈번하게 발생하는 경우입니다. 코드를 작성하면서 여러 군데에 로그를 출력하는 코드를 삽입했다던가, 개발 환경에서만 작동하는 코드를 임시로 넣었을 때 그 내용을 되돌리는 경우입니다.
물론 기존 커밋과 비교해서 일일이 원본으로 수정해도 되지만, 수정한 내용이 많거나 여러 군데에 흩어져 있을 경우에는 상당히 귀찮은 작업입니다.

소스 트리 같은 툴에서는 간단하게 되돌릴 수 있는데 명령어로도 (당연히) 가능합니다.
이때 사용하는 것이 `git checkout` 입니다.

만약 몰랐던 분이라면 조금 놀라실 수도 있겠습니다. (실은 제가 처음 알았을 때 그랬습니다..ㅎ) `checkout`을 브랜치를 변경하는 명령어로만 알고 있었으니까요.

예시를 보겠습니다.

{% asset_img 1.JPG %}

우선 초기 상태를 만들기 위해 `file1`이라는 파일을 하나 생성하고 커밋했습니다.

{% asset_img 2.JPG %}

텍스트 한 줄을 file1에 추가했습니다. status를 보면 modified 된 것을 알 수 있습니다.
이 상태에서 추가된 라인을 지워도 원래 상태로 돌아오겠지만, 명령어로도 되돌릴 수 있습니다.

{% asset_img 3.JPG %}

status를 보면 원래 상태로 돌아온 것을 알 수 있습니다.

{% asset_img 4.JPG %}

checkout 명령어를 이용해 수정한 내용을 되돌릴 때 명령어 뒤에 오는 것은 엄밀히 말해 파일 명이 아닌 **pathspec** 입니다.
즉, 위와 같이 여러 개의 파일이 수정된 상황에서 현재 디렉토리로 path를 주게 되면

{% asset_img 5.JPG %}

모든 수정된 파일을 되돌릴 수 있게 됩니다.

하나 주의해야할 점은 새롭게 추가된 파일, 다시 말하자면 **Untracked file**의 경우에는 checkout을 하더라도 삭제되지 않습니다.

## 2. Unstaging

역시나 빈번하게 발생하는 상황입니다. `add` 명령어로 stage 상태로 만든 파일을 다시 unstage 상태로 만드는 것입니다.
마찬가지로 소스트리에서는 간단하게 가능하지만 명령어로 하는 방법을 알아보고자 합니다.

{% asset_img 6.JPG %}

file1을 수정한 후에 stage 상태로 만들었습니다.
그런데 사실 unstaging에 대한 해법은 이미 나와있습니다. 잘 보면 unstaging 하려면 `reset` 명령어를 이용하라는 메시지가 나와있습니다.

{% asset_img 7.JPG %}

reset 명령어로 unstage 상태로 만들었습니다.
(테스트해보니 **HEAD**를 소문자로 입력해도 정상적으로 동작합니다.)

## 3. Commit 되돌리기

### 3.1. reset

### 3.2. revert
